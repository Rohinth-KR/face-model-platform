<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Verify Face • Face Model Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Syne:wght@300;400;600&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet"/>

    <style>
        :root {
            --bg: #020509;
            --cyan: #00d4ff;
            --green: #00ffb3;
            --amber: #ffaa00;
            --danger: #ff4466;
            --text: #d6eeff;
            --text-muted: #4a7a99;
            --border: rgba(0, 212, 255, 0.12);
            --border-active: rgba(0, 212, 255, 0.5);
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            min-height: 100vh;
            background: var(--bg);
            font-family: 'Syne', sans-serif;
            color: var(--text);
            overflow-x: hidden;
        }

        /* ── BACKGROUND ── */
        .bg-grid {
            position: fixed; inset: 0; pointer-events: none; z-index: 0;
            background-image:
                linear-gradient(rgba(0,212,255,0.025) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,212,255,0.025) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridDrift 22s linear infinite;
        }
        @keyframes gridDrift { to { transform: translateY(40px); } }

        .bg-radial {
            position: fixed; inset: 0; pointer-events: none; z-index: 0;
            background:
                radial-gradient(ellipse 60% 40% at 50% 0%, rgba(0,212,255,0.08) 0%, transparent 70%),
                radial-gradient(ellipse 35% 35% at 10% 90%, rgba(0,255,179,0.04) 0%, transparent 60%);
        }

        .scanline {
            position: fixed; top: -2px; left: 0; width: 100%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--cyan), transparent);
            animation: scan 8s linear infinite; opacity: 0.2; pointer-events: none; z-index: 1;
        }
        @keyframes scan { to { top: 100vh; } }

        /* ── NAVBAR ── */
        .navbar {
            position: sticky; top: 0; z-index: 100;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 32px; height: 60px;
            background: rgba(2,5,9,0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            animation: fadeDown 0.6s ease both;
        }
        @keyframes fadeDown { from { opacity:0; transform:translateY(-12px); } to { opacity:1; transform:translateY(0); } }

        .nav-brand { display: flex; align-items: center; gap: 10px; }
        .logo-mark {
            width: 28px; height: 28px; border-radius: 6px;
            border: 1px solid rgba(0,212,255,0.4);
            background: rgba(0,212,255,0.06);
            display: flex; align-items: center; justify-content: center;
        }
        .logo-mark svg { width: 16px; height: 16px; }
        .brand-name {
            font-family: 'Orbitron', monospace;
            font-size: 14px; font-weight: 700; color: #fff; letter-spacing: 2px;
        }
        .brand-name span { color: var(--cyan); }

        .nav-center { display: flex; align-items: center; gap: 4px; }
        .nav-link {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px; letter-spacing: 2px; text-transform: uppercase;
            color: var(--text-muted); text-decoration: none;
            padding: 6px 14px; border-radius: 6px;
            border: 1px solid transparent;
            transition: all 0.2s;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--cyan); background: rgba(0,212,255,0.06); border-color: rgba(0,212,255,0.15);
        }

        .nav-right { display: flex; align-items: center; gap: 12px; }
        .user-chip {
            display: flex; align-items: center; gap: 8px;
            padding: 5px 12px 5px 8px;
            background: rgba(0,212,255,0.06);
            border: 1px solid var(--border); border-radius: 20px;
        }
        .user-avatar {
            width: 24px; height: 24px; border-radius: 50%;
            background: linear-gradient(135deg, var(--cyan), var(--green));
            display: flex; align-items: center; justify-content: center;
            font-family: 'Orbitron', monospace; font-size: 9px; font-weight: 700; color: #020509;
        }
        .user-name { font-family: 'JetBrains Mono', monospace; font-size: 10px; color: var(--text); letter-spacing: 1px; }

        .logout-form { display: inline; }
        .btn-logout {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px; letter-spacing: 1.5px; text-transform: uppercase;
            color: var(--text-muted); background: none;
            border: 1px solid var(--border); border-radius: 6px;
            padding: 6px 12px; cursor: pointer; transition: all 0.2s;
        }
        .btn-logout:hover { color: var(--danger); border-color: rgba(255,68,102,0.35); background: rgba(255,68,102,0.06); }

        /* ── PAGE ── */
        .page-wrap {
            position: relative; z-index: 2;
            max-width: 1100px; margin: 0 auto;
            padding: 40px 24px 80px;
        }

        /* ── PAGE HEADER ── */
        .page-header {
            margin-bottom: 36px;
            animation: fadeUp 0.7s 0.1s ease both;
        }
        @keyframes fadeUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

        .eyebrow {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px; letter-spacing: 3px; text-transform: uppercase;
            color: var(--cyan); margin-bottom: 8px;
            display: flex; align-items: center; gap: 8px;
        }
        .eyebrow::before { content: ''; width: 20px; height: 1px; background: var(--cyan); }

        .page-header h1 {
            font-family: 'Orbitron', monospace;
            font-size: 28px; font-weight: 700; color: #fff; letter-spacing: 1px;
        }
        .page-header h1 span { color: var(--cyan); }
        .page-header p { margin-top: 8px; font-size: 14px; color: var(--text-muted); font-weight: 300; }

        /* ── MAIN GRID ── */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 24px; align-items: start;
        }

        /* ── VERIFY CARD ── */
        .verify-card {
            background: rgba(6,13,24,0.9);
            border: 1px solid var(--border);
            border-radius: 20px; overflow: hidden;
            position: relative;
            animation: fadeUp 0.7s 0.2s ease both;
        }
        .verify-card::before {
            content: ''; position: absolute; top: 0; left: 20%; right: 20%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--cyan), transparent);
            opacity: 0.5;
        }

        .card-top {
            padding: 22px 28px 18px;
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; gap: 14px;
        }
        .card-icon-box {
            width: 42px; height: 42px;
            background: rgba(0,212,255,0.08);
            border: 1px solid rgba(0,212,255,0.2);
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center; flex-shrink: 0;
        }
        .card-icon-box svg { width: 22px; height: 22px; }
        .card-title { font-family: 'Orbitron', monospace; font-size: 14px; font-weight: 700; color: #fff; letter-spacing: 1px; }
        .card-subtitle { font-size: 12px; color: var(--text-muted); margin-top: 3px; font-weight: 300; }

        /* ── SCAN ANIMATION AREA ── */
        .scan-visual {
            position: relative;
            margin: 24px 28px 0;
            height: 100px;
            border-radius: 14px;
            background: rgba(0,212,255,0.02);
            border: 1px dashed rgba(0,212,255,0.15);
            overflow: hidden;
            display: flex; align-items: center; justify-content: center;
        }
        .scan-visual .scan-beam {
            position: absolute; top: 0; left: 0; right: 0; height: 2px;
            background: linear-gradient(90deg, transparent, rgba(0,212,255,0.8), transparent);
            animation: beamSweep 2.5s ease-in-out infinite;
        }
        @keyframes beamSweep {
            0%   { top: 0; opacity: 1; }
            50%  { top: calc(100% - 2px); opacity: 0.8; }
            100% { top: 0; opacity: 1; }
        }

        /* Face outline SVG in scan area */
        .scan-face-wrap {
            position: relative; z-index: 2;
            display: flex; align-items: center; justify-content: center; gap: 20px;
        }
        .scan-face-svg { width: 60px; height: 60px; opacity: 0.35; }

        .scan-corner { position: absolute; width: 14px; height: 14px; }
        .scan-corner.tl { top: 8px; left: 8px; border-top: 1.5px solid var(--cyan); border-left: 1.5px solid var(--cyan); }
        .scan-corner.tr { top: 8px; right: 8px; border-top: 1.5px solid var(--cyan); border-right: 1.5px solid var(--cyan); }
        .scan-corner.bl { bottom: 8px; left: 8px; border-bottom: 1.5px solid var(--cyan); border-left: 1.5px solid var(--cyan); }
        .scan-corner.br { bottom: 8px; right: 8px; border-bottom: 1.5px solid var(--cyan); border-right: 1.5px solid var(--cyan); }

        .scan-status-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px; letter-spacing: 2px; text-transform: uppercase;
            color: var(--text-muted); text-align: center;
        }
        .scan-status-text .blink {
            display: inline-block; width: 5px; height: 5px;
            background: var(--cyan); border-radius: 50%;
            box-shadow: 0 0 6px var(--cyan);
            animation: blink 1.2s ease-in-out infinite;
            vertical-align: middle; margin-right: 6px;
        }
        @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0.2;} }

        /* ── FORM ── */
        .form-body { padding: 20px 28px 28px; }
        form { display: flex; flex-direction: column; gap: 20px; }

        .field { display: flex; flex-direction: column; gap: 8px; }
        .field label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px; letter-spacing: 2px; text-transform: uppercase;
            color: var(--cyan); opacity: 0.7;
        }

        .input-wrap { position: relative; }
        .input-icon {
            position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
            width: 15px; height: 15px; opacity: 0.35; pointer-events: none; transition: opacity 0.2s;
        }
        .input-wrap:focus-within .input-icon { opacity: 0.9; }

        input[type="text"] {
            width: 100%; padding: 12px 16px 12px 40px;
            border-radius: 10px; border: 1px solid var(--border);
            background: rgba(0,8,18,0.7); color: var(--text);
            font-family: 'Syne', sans-serif; font-size: 14px; outline: none;
            transition: border-color 0.25s, box-shadow 0.25s, background 0.25s;
        }
        input[type="text"]::placeholder { color: rgba(74,122,153,0.45); font-size: 13px; }
        input[type="text"]:focus {
            border-color: var(--border-active);
            background: rgba(0,212,255,0.03);
            box-shadow: 0 0 0 3px rgba(0,212,255,0.07), 0 0 20px rgba(0,212,255,0.06);
        }

        /* Image drop zone */
        .drop-zone {
            border: 1px dashed rgba(0,212,255,0.25); border-radius: 12px;
            padding: 28px 20px; text-align: center; cursor: pointer;
            background: rgba(0,212,255,0.02); transition: all 0.3s; position: relative; overflow: hidden;
        }
        .drop-zone:hover, .drop-zone.dragover {
            border-color: rgba(0,212,255,0.55); background: rgba(0,212,255,0.05);
            box-shadow: 0 0 30px rgba(0,212,255,0.06);
        }
        .drop-zone input[type="file"] {
            position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%;
        }
        .drop-icon { margin: 0 auto 10px; width: 32px; height: 32px; opacity: 0.45; }
        .drop-title {
            font-family: 'JetBrains Mono', monospace; font-size: 11px;
            letter-spacing: 1.5px; text-transform: uppercase; color: var(--text); margin-bottom: 4px;
        }
        .drop-sub { font-size: 11px; color: var(--text-muted); font-weight: 300; }
        .file-chosen {
            margin-top: 10px; font-family: 'JetBrains Mono', monospace;
            font-size: 10px; letter-spacing: 1px; color: var(--green); display: none;
        }

        /* Verify button */
        .btn-verify {
            padding: 15px; border-radius: 12px; border: none;
            font-family: 'Orbitron', monospace; font-size: 12px; font-weight: 700;
            letter-spacing: 3px; text-transform: uppercase;
            cursor: pointer; color: #020509;
            background: linear-gradient(135deg, #00d4ff 0%, #00ffb3 100%);
            position: relative; overflow: hidden;
            transition: transform 0.15s, box-shadow 0.15s;
            box-shadow: 0 0 30px rgba(0,212,255,0.3), 0 8px 25px rgba(0,212,255,0.2);
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-verify::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
            transition: left 0.4s;
        }
        .btn-verify:hover { transform: translateY(-2px); box-shadow: 0 0 50px rgba(0,212,255,0.45), 0 14px 40px rgba(0,212,255,0.25); }
        .btn-verify:hover::before { left: 100%; }
        .btn-verify svg { width: 16px; height: 16px; flex-shrink: 0; }

        /* ── RESULT PANEL ── */
        .result-wrap { padding: 0 28px 28px; }

        .result-match {
            border-radius: 14px; overflow: hidden;
            border: 1px solid rgba(0,255,179,0.25);
            background: rgba(0,255,179,0.04);
            animation: resultIn 0.5s ease both;
        }
        .result-fail-card {
            border-radius: 14px; overflow: hidden;
            border: 1px solid rgba(255,68,102,0.25);
            background: rgba(255,68,102,0.04);
            animation: resultIn 0.5s ease both;
        }
        @keyframes resultIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

        .result-header {
            padding: 14px 18px;
            display: flex; align-items: center; gap: 12px;
            border-bottom: 1px solid rgba(0,255,179,0.12);
        }
        .result-fail-card .result-header { border-bottom-color: rgba(255,68,102,0.12); }

        .result-badge {
            padding: 4px 12px; border-radius: 20px;
            font-family: 'Orbitron', monospace; font-size: 10px; font-weight: 700; letter-spacing: 2px;
        }
        .badge-match { background: rgba(0,255,179,0.12); color: var(--green); border: 1px solid rgba(0,255,179,0.3); }
        .badge-fail  { background: rgba(255,68,102,0.12); color: #ff7090; border: 1px solid rgba(255,68,102,0.3); }

        .result-body { padding: 16px 18px; display: flex; flex-direction: column; gap: 10px; }

        .result-row {
            display: flex; align-items: center; justify-content: space-between;
            padding: 10px 12px; border-radius: 8px;
            background: rgba(0,0,0,0.2);
        }
        .result-row-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9px; letter-spacing: 2px; text-transform: uppercase; color: var(--text-muted);
        }
        .result-row-value {
            font-family: 'JetBrains Mono', monospace; font-size: 12px; font-weight: 400;
        }
        .result-row-value.match-val { color: var(--green); }
        .result-row-value.fail-val  { color: #ff7090; }
        .result-row-value.neutral   { color: var(--cyan); }

        /* Similarity bar */
        .sim-bar-wrap { padding: 4px 0 2px; }
        .sim-bar-track {
            height: 4px; border-radius: 4px;
            background: rgba(255,255,255,0.06); margin-top: 8px; overflow: hidden;
        }
        .sim-bar-fill {
            height: 100%; border-radius: 4px;
            transition: width 0.8s ease;
        }
        .sim-bar-fill.match-bar { background: linear-gradient(90deg, var(--cyan), var(--green)); box-shadow: 0 0 8px rgba(0,255,179,0.4); }
        .sim-bar-fill.fail-bar  { background: linear-gradient(90deg, #ff4466, #ff7090); }
        .sim-label-row { display: flex; justify-content: space-between; margin-top: 4px; }
        .sim-label-row span { font-family: 'JetBrains Mono', monospace; font-size: 8px; color: var(--text-muted); letter-spacing: 1px; }

        /* ── ERROR ── */
        .msg-error {
            margin: 0 28px 28px;
            padding: 14px 16px; border-radius: 10px;
            font-family: 'JetBrains Mono', monospace; font-size: 11px; letter-spacing: 0.5px;
            display: flex; gap: 10px; align-items: flex-start;
            background: rgba(255,68,102,0.07); border: 1px solid rgba(255,68,102,0.2); color: #ff7090;
        }
        .msg-error svg { width: 14px; height: 14px; flex-shrink: 0; margin-top: 1px; }

        /* ── SIDE PANEL ── */
        .side-panel { display: flex; flex-direction: column; gap: 16px; animation: fadeUp 0.7s 0.35s ease both; }

        .side-card {
            background: rgba(6,13,24,0.9);
            border: 1px solid var(--border); border-radius: 16px; padding: 20px;
            position: relative; overflow: hidden;
        }
        .side-card-title {
            font-family: 'Orbitron', monospace;
            font-size: 11px; font-weight: 600; letter-spacing: 1.5px; text-transform: uppercase;
            color: var(--text); margin-bottom: 16px;
            display: flex; align-items: center; gap: 8px;
        }
        .side-card-title::before { content: ''; width: 3px; height: 12px; background: var(--cyan); border-radius: 2px; }

        /* Confidence levels legend */
        .conf-levels { display: flex; flex-direction: column; gap: 10px; }
        .conf-row { display: flex; align-items: center; gap: 10px; }
        .conf-bar-wrap { flex: 1; }
        .conf-bar-track { height: 4px; border-radius: 4px; background: rgba(255,255,255,0.05); overflow: hidden; }
        .conf-bar-fill { height: 100%; border-radius: 4px; }
        .conf-label { font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 1px; text-transform: uppercase; width: 54px; }
        .conf-pct { font-family: 'JetBrains Mono', monospace; font-size: 9px; color: var(--text-muted); width: 32px; text-align: right; }

        /* How it works */
        .how-steps { display: flex; flex-direction: column; gap: 12px; }
        .how-step { display: flex; gap: 12px; align-items: flex-start; }
        .step-num {
            width: 22px; height: 22px; border-radius: 5px; flex-shrink: 0;
            background: rgba(0,212,255,0.08); border: 1px solid rgba(0,212,255,0.2);
            display: flex; align-items: center; justify-content: center;
            font-family: 'JetBrains Mono', monospace; font-size: 8px; color: var(--cyan);
        }
        .step-text { font-size: 12px; color: var(--text-muted); line-height: 1.5; font-weight: 300; }
        .step-text strong { color: var(--text); font-weight: 600; display: block; margin-bottom: 1px; }

        /* Tips */
        .tips-list { display: flex; flex-direction: column; gap: 9px; }
        .tip { display: flex; gap: 8px; align-items: flex-start; font-size: 12px; color: var(--text-muted); line-height: 1.5; font-weight: 300; }
        .tip-dot { width: 5px; height: 5px; background: var(--amber); border-radius: 50%; flex-shrink: 0; margin-top: 5px; }

        /* ── RESPONSIVE ── */
        @media (max-width: 820px) {
            .main-grid { grid-template-columns: 1fr; }
            .nav-center { display: none; }
        }
        @media (max-width: 500px) {
            .navbar { padding: 0 16px; }
            .page-wrap { padding: 24px 14px 60px; }
        }
    </style>
</head>
<body>

<div class="bg-grid"></div>
<div class="bg-radial"></div>
<div class="scanline"></div>

<!-- ── NAVBAR ── -->
<nav class="navbar">
    <div class="nav-brand">
        <div class="logo-mark">
            <svg viewBox="0 0 16 16" fill="none">
                <circle cx="8" cy="6" r="3" stroke="#00d4ff" stroke-width="1.2"/>
                <circle cx="8" cy="6" r="0.8" fill="#00ffb3"/>
                <path d="M2 15c0-3.314 2.686-6 6-6s6 2.686 6 6" stroke="#00d4ff" stroke-width="1.2" stroke-linecap="round"/>
            </svg>
        </div>
        <span class="brand-name">FACE<span>FORGE</span></span>
    </div>

    <div class="nav-center">
        <a href="{% url 'train' %}" class="nav-link">Train</a>
        <a href="{% url 'gallery_list' %}" class="nav-link">Galleries</a>
        <a href="{% url 'verify' %}" class="nav-link active">Verify</a>
    </div>

    <div class="nav-right">
        <div class="user-chip">
            <div class="user-avatar">{{ request.user.username|slice:":1"|upper }}</div>
            <span class="user-name">{{ request.user.username }}</span>
        </div>
        <form class="logout-form" method="post" action="/logout/">
            {% csrf_token %}
            <button class="btn-logout" type="submit">Logout</button>
        </form>
    </div>
</nav>

<!-- ── PAGE ── -->
<div class="page-wrap">

    <div class="page-header">
        <div class="eyebrow">Biometric Authentication</div>
        <h1>Verify <span>Face Identity</span></h1>
        <p>Upload a face image and run it against a trained gallery to confirm identity.</p>
    </div>

    <div class="main-grid">

        <!-- Verify card -->
        <div class="verify-card">
            <div class="card-top">
                <div class="card-icon-box">
                    <!-- Scan / crosshair icon -->
                    <svg viewBox="0 0 22 22" fill="none">
                        <circle cx="11" cy="11" r="4" stroke="#00d4ff" stroke-width="1.2"/>
                        <circle cx="11" cy="11" r="1.2" fill="#00ffb3"/>
                        <path d="M11 2v3M11 17v3M2 11h3M17 11h3" stroke="#00d4ff" stroke-width="1.2" stroke-linecap="round"/>
                        <path d="M5 5l1.5 1.5M15.5 15.5L17 17M17 5l-1.5 1.5M6.5 15.5L5 17" stroke="#00d4ff" stroke-width="1" stroke-linecap="round"/>
                    </svg>
                </div>
                <div>
                    <div class="card-title">IDENTITY SCAN</div>
                    <div class="card-subtitle">Match a face against your trained gallery model</div>
                </div>
            </div>

            <!-- Scan animation visual -->
            <div class="scan-visual">
                <div class="scan-beam"></div>
                <div class="scan-corner tl"></div>
                <div class="scan-corner tr"></div>
                <div class="scan-corner bl"></div>
                <div class="scan-corner br"></div>
                <div class="scan-face-wrap">
                    <svg class="scan-face-svg" viewBox="0 0 60 60" fill="none">
                        <path d="M30 6C19.507 6 11 14.507 11 25v9c0 6.627 4.03 12.314 9.75 14.85V52a3 3 0 003 3h12.5a3 3 0 003-3v-3.15C44.97 46.314 49 40.627 49 34v-9C49 14.507 40.493 6 30 6z" stroke="#00d4ff" stroke-width="1" fill="rgba(0,212,255,0.04)"/>
                        <circle cx="22" cy="27" r="3" stroke="#00d4ff" stroke-width="1" fill="rgba(0,212,255,0.1)"/>
                        <circle cx="38" cy="27" r="3" stroke="#00d4ff" stroke-width="1" fill="rgba(0,212,255,0.1)"/>
                        <circle cx="22" cy="27" r="1" fill="#00ffb3"/>
                        <circle cx="38" cy="27" r="1" fill="#00ffb3"/>
                        <path d="M26 38c1.2 1.8 3.2 2.8 4 2.8s2.8-1 4-2.8" stroke="#00d4ff" stroke-width="1" stroke-linecap="round"/>
                        <line x1="13" y1="32" x2="47" y2="32" stroke="rgba(0,212,255,0.2)" stroke-width="0.5" stroke-dasharray="3 4"/>
                    </svg>
                    <div>
                        <div class="scan-status-text"><span class="blink"></span>AWAITING INPUT</div>
                    </div>
                </div>
            </div>

            <div class="form-body">
                <form method="post" action="{% url 'verify' %}" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="field">
                        <label>Gallery Name</label>
                        <div class="input-wrap">
                            <svg class="input-icon" viewBox="0 0 15 15" fill="none">
                                <rect x="1.5" y="3" width="12" height="10" rx="1.5" stroke="#00d4ff" stroke-width="1.1"/>
                                <path d="M5 3V2a2 2 0 014 0v1" stroke="#00d4ff" stroke-width="1.1"/>
                                <path d="M4.5 8h6M4.5 11h4" stroke="#00d4ff" stroke-width="1" stroke-linecap="round"/>
                            </svg>
                            <input type="text" name="gallery_name" value="{{ gallery }}" placeholder="Enter target gallery name" required>
                        </div>
                    </div>

                    <div class="field">
                        <label>Face Image to Verify</label>
                        <div class="drop-zone" id="dropZone">
                            <input type="file" name="image" accept="image/*" required id="fileInput">
                            <svg class="drop-icon" viewBox="0 0 32 32" fill="none">
                                <circle cx="16" cy="12" r="5.5" stroke="#00d4ff" stroke-width="1.2"/>
                                <circle cx="16" cy="12" r="1.5" fill="#00ffb3"/>
                                <!-- scan lines on face -->
                                <path d="M8 12h2M22 12h2M16 6v2M16 18v2" stroke="#00d4ff" stroke-width="1" stroke-linecap="round"/>
                                <!-- body -->
                                <path d="M5 28c0-6.075 4.925-11 11-11s11 4.925 11 11" stroke="#00d4ff" stroke-width="1.2" stroke-linecap="round"/>
                                <!-- upload arrow -->
                                <path d="M28 6v6M25 9l3-3 3 3" stroke="#00ffb3" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="drop-title">Drop face image here</div>
                            <div class="drop-sub">or click to browse — one image only</div>
                            <div class="file-chosen" id="fileChosen"></div>
                        </div>
                    </div>

                    <button class="btn-verify" type="submit">
                        <svg viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="6" stroke="#020509" stroke-width="1.4"/>
                            <circle cx="8" cy="8" r="2" stroke="#020509" stroke-width="1.4"/>
                            <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="#020509" stroke-width="1.2" stroke-linecap="round"/>
                        </svg>
                        RUN VERIFICATION
                    </button>
                </form>
            </div>

            <!-- MATCH result -->
            {% if result %}
                <div class="result-wrap">
                    {% if result == "MATCH" %}
                    <div class="result-match">
                        <div class="result-header">
                            <span class="result-badge badge-match">✓ &nbsp;MATCH CONFIRMED</span>
                        </div>
                        <div class="result-body">
                            <div class="result-row">
                                <span class="result-row-label">Status</span>
                                <span class="result-row-value match-val">IDENTITY VERIFIED</span>
                            </div>
                            <div class="result-row">
                                <span class="result-row-label">Person</span>
                                <span class="result-row-value neutral">{{ person }}</span>
                            </div>
                            <div class="result-row">
                                <span class="result-row-label">Similarity</span>
                                <span class="result-row-value match-val">{{ similarity }}</span>
                            </div>
                            <div class="sim-bar-wrap">
                                <div class="sim-label-row">
                                    <span>CONFIDENCE LEVEL</span>
                                    <span>{{ similarity }}</span>
                                </div>
                                <div class="sim-bar-track">
                                    <div class="sim-bar-fill match-bar" id="simBar" style="width: 0%"></div>
                                </div>
                                <div class="sim-label-row" style="margin-top:6px;">
                                    <span>0%</span><span>50%</span><span>100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="result-fail-card">
                        <div class="result-header">
                            <span class="result-badge badge-fail">✕ &nbsp;NO MATCH</span>
                        </div>
                        <div class="result-body">
                            <div class="result-row">
                                <span class="result-row-label">Status</span>
                                <span class="result-row-value fail-val">IDENTITY NOT FOUND</span>
                            </div>
                            <div class="result-row">
                                <span class="result-row-label">Similarity</span>
                                <span class="result-row-value fail-val">{{ similarity }}</span>
                            </div>
                            <div class="sim-bar-wrap">
                                <div class="sim-label-row">
                                    <span>CONFIDENCE LEVEL</span>
                                    <span>{{ similarity }}</span>
                                </div>
                                <div class="sim-bar-track">
                                    <div class="sim-bar-fill fail-bar" id="simBar" style="width: 0%"></div>
                                </div>
                                <div class="sim-label-row" style="margin-top:6px;">
                                    <span>0%</span><span>50%</span><span>100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            {% endif %}

            {% if error %}
            <div class="msg-error">
                <svg viewBox="0 0 14 14" fill="none">
                    <circle cx="7" cy="7" r="6" stroke="#ff4466" stroke-width="1.2"/>
                    <path d="M7 4v3.5M7 9.5v.5" stroke="#ff4466" stroke-width="1.2" stroke-linecap="round"/>
                </svg>
                <div>{{ error }}</div>
            </div>
            {% endif %}
        </div>

        <!-- Side panel -->
        <div class="side-panel">

            <!-- Confidence legend -->
            <div class="side-card">
                <div class="side-card-title">Confidence Scale</div>
                <div class="conf-levels">
                    <div class="conf-row">
                        <span class="conf-label" style="color: var(--green); font-size:9px;">HIGH</span>
                        <div class="conf-bar-wrap">
                            <div class="conf-bar-track">
                                <div class="conf-bar-fill" style="width:90%; background: var(--green); height:100%; border-radius:4px;"></div>
                            </div>
                        </div>
                        <span class="conf-pct">&gt; 80%</span>
                    </div>
                    <div class="conf-row">
                        <span class="conf-label" style="color: var(--cyan); font-size:9px;">GOOD</span>
                        <div class="conf-bar-wrap">
                            <div class="conf-bar-track">
                                <div class="conf-bar-fill" style="width:65%; background: var(--cyan); height:100%; border-radius:4px;"></div>
                            </div>
                        </div>
                        <span class="conf-pct">60–80%</span>
                    </div>
                    <div class="conf-row">
                        <span class="conf-label" style="color: var(--amber); font-size:9px;">LOW</span>
                        <div class="conf-bar-wrap">
                            <div class="conf-bar-track">
                                <div class="conf-bar-fill" style="width:38%; background: var(--amber); height:100%; border-radius:4px;"></div>
                            </div>
                        </div>
                        <span class="conf-pct">40–60%</span>
                    </div>
                    <div class="conf-row">
                        <span class="conf-label" style="color: var(--danger); font-size:9px;">FAIL</span>
                        <div class="conf-bar-wrap">
                            <div class="conf-bar-track">
                                <div class="conf-bar-fill" style="width:18%; background: var(--danger); height:100%; border-radius:4px;"></div>
                            </div>
                        </div>
                        <span class="conf-pct">&lt; 40%</span>
                    </div>
                </div>
            </div>

            <!-- How it works -->
            <div class="side-card">
                <div class="side-card-title">How Verify Works</div>
                <div class="how-steps">
                    <div class="how-step">
                        <div class="step-num">01</div>
                        <div class="step-text"><strong>Pick a gallery</strong>Enter the name of your trained face gallery model.</div>
                    </div>
                    <div class="how-step">
                        <div class="step-num">02</div>
                        <div class="step-text"><strong>Upload a photo</strong>Provide a clear, front-facing image to test.</div>
                    </div>
                    <div class="how-step">
                        <div class="step-num">03</div>
                        <div class="step-text"><strong>Run the scan</strong>The model compares facial embeddings for similarity.</div>
                    </div>
                    <div class="how-step">
                        <div class="step-num">04</div>
                        <div class="step-text"><strong>Read the result</strong>MATCH or NO MATCH with a similarity confidence score.</div>
                    </div>
                </div>
            </div>

            <!-- Tips -->
            <div class="side-card">
                <div class="side-card-title">Verification Tips</div>
                <div class="tips-list">
                    <div class="tip"><div class="tip-dot"></div>Use a clear, front-facing photo for best accuracy</div>
                    <div class="tip"><div class="tip-dot"></div>Good lighting dramatically improves match confidence</div>
                    <div class="tip"><div class="tip-dot"></div>Ensure the gallery was trained with that exact person</div>
                    <div class="tip"><div class="tip-dot"></div>Avoid heavily compressed or low-resolution images</div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    // File input feedback
    const fileInput = document.getElementById('fileInput');
    const fileChosen = document.getElementById('fileChosen');
    const dropZone = document.getElementById('dropZone');

    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            fileChosen.style.display = 'block';
            fileChosen.textContent = '✓ ' + fileInput.files[0].name;
        }
    });

    dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('dragover'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
    dropZone.addEventListener('drop', (e) => {
        e.preventDefault(); dropZone.classList.remove('dragover');
        fileInput.files = e.dataTransfer.files;
        if (e.dataTransfer.files.length > 0) {
            fileChosen.style.display = 'block';
            fileChosen.textContent = '✓ ' + e.dataTransfer.files[0].name;
        }
    });

    // Animate similarity bar on load if result present
    window.addEventListener('load', () => {
        const bar = document.getElementById('simBar');
        if (bar) {
            const raw = "{{ similarity }}";
            const num = parseFloat(raw);
            if (!isNaN(num)) {
                setTimeout(() => {
                    bar.style.width = Math.min(100, Math.round(num * 100 > 1 ? num : num * 100)) + '%';
                }, 300);
            }
        }
    });
</script>

</body>
</html>